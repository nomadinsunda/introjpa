

# 🧩 1:1 관계 설계의 핵심 — 주 테이블과 대상 테이블, 그리고 FK 배치 전략

### 데이터베이스 엔지니어링에서 반드시 알아야 할 1:1 관계 설계의 기준

데이터베이스에서 **1:1 관계(One-to-One Relationship)**를 설계할 때 가장 먼저 부딪히는 질문은 이것입니다.

> “외래 키(FK)를 어디에 둬야 할까?” 🤔
> “User가 Profile을 가지니 User에 profile_id가 있어야 하지 않을까?”

그러나 실무에서는 이보다 더 깊은 기준이 존재합니다. 바로 **주 테이블(Main Table)**과 **대상 테이블(Target/Detail Table)**의 개념입니다.
이 기준을 이해하면 FK를 어디에 두어야 하는지 명확해지고, 확장성과 유지보수성 면에서 훨씬 안정적인 구조를 만들 수 있습니다.

이번 글에서는 이 개념을 깊이 있게 정리해보겠습니다.

---

# 1️⃣ 주 테이블(Main Table) — 시스템의 중심이 되는 엔티티 👑

주 테이블은 **비즈니스 로직에서 가장 중심적인 역할**을 담당하는 테이블입니다.

## ✔ 특징

* 그 자체만으로도 **존재 의미가 충분함**
* 서비스 전반에서 가장 많이 조회됨
* 다른 상세정보 없이도 주요 기능을 수행할 수 있음

## ✔ 예시

* `User` (회원)
* `Person`
* `Product`
* `Order`

## ✔ 관점

> “나는 나를 설명해주는 상세 정보들을 가질 수 있어.”

## ⭐ 장점(여기에 FK를 둘 경우)

* 주 테이블만 조회해도 **연관 정보 존재 여부를 바로 확인**할 수 있음
* 객체지향 개발자 입장에서 구조가 매우 직관적임
* 단방향 객체 모델링이 부드럽게 진행됨

하지만 단점도 존재합니다.
바로 **주 테이블이 과도하게 비대해질 가능성**입니다.

---

# 2️⃣ 대상 테이블(Target Table) — 주 테이블을 보완하는 상세 정보 📄

대상 테이블은 **주 테이블에 대한 부가 정보(Detail or Additional Info)**를 담는 엔티티입니다.

## ✔ 특징

* 주 테이블이 없으면 **존재 의미가 없음**
* 데이터 양이 많거나 사용 빈도가 낮아서 별도로 분리하는 경우가 많음

## ✔ 예시

* `Profile` (프로필 정보)
* `Passport` (여권 정보)
* `LoginHistory` (로그인 기록)
* `UserSettings` (환경 설정)

## ✔ 관점

> “나는 특정 사용자(User)에 종속되는 정보야.”

## ⭐ 장점(FK를 대상 테이블에 둘 경우)

* 주 테이블(User)을 **가볍게 유지**할 수 있음
* 나중에 1:1 → 1:N으로 변경이 필요하더라도
  **UNIQUE 제약만 제거하면 바로 확장 가능**
* 테이블 간 응집도가 자연스러움

그래서 많은 DBA와 고급 설계자들은
👉 대상 테이블이 FK를 가지는 방식을 더 선호합니다.

---

# 3️⃣ User–Profile 예시로 비교해보기 🔍

아래는 “사용자(User) ↔ 프로필(Profile)” 관계에서 FK를 어디에 둘지 비교한 표입니다.

| 비교 항목             | **User가 FK(`profile_id`)를 가질 때** | **Profile이 FK(`user_id`)를 가질 때** |
| ----------------- | -------------------------------- | -------------------------------- |
| FK 위치             | User 테이블                         | Profile 테이블                      |
| 프로필 여부 확인         | ⭐ User 조회만으로 가능                  | ❌ 별도 조회 필요                       |
| 주 테이블(User) 구조    | ❌ 컬럼이 점점 늘어나 비대해짐                | ⭐ 깔끔하고 안정적                       |
| 확장성(1:1 → 1:N 전환) | ❌ 테이블 구조 변경 필요                   | ⭐ UNIQUE 제약만 제거하면 즉시 가능          |
| 객체지향 개발 관점        | ⭐ 직관적                            | △ 설계 이해 필요                       |
| DBA 관점            | △ 비효율적                           | ⭐ 강력 추천                          |

---

# 4️⃣ 어떤 선택을 해야 할까? 🎯

선택 기준은 다음과 같습니다.

---

## ✔ 기준 1: “서비스의 중심은 어디인가?”

* User가 서비스의 중심 → User 테이블을 가볍게 유지하는 것이 최선
  → **Profile에 FK를 두는 방식이 유리**

---

## ✔ 기준 2: “향후 관계가 확장될 가능성이 있는가?”

* 프로필이 여러 개로 확장될 가능성 있음
  → **Profile이 FK를 가지는 방식**이 압도적으로 유리

---

## ✔ 기준 3: 조회 패턴은 어떠한가?

* User를 자주 조회한다 → User는 비대해지면 안 됨
* Profile은 가끔 조회한다 → Profile에 FK를 두는 게 자연스러움

---

# 🏁 결론: 실무에서는 대체로 **대상 테이블에 FK를 둔다** ✔

정리하자면,

### 🧠 주 테이블(Main)

* 시스템의 중심
* 자주 조회됨
* 애플리케이션의 핵심 기능과 직결됨

### 📄 대상 테이블(Target)

* 상세 정보
* 확장 가능성이 큼
* 종속적인 엔티티

> 따라서 **실무적·확장성·성능·유지보수** 관점에서는
> 👉 **대상 테이블(Profile)**이 **FK를 소유**하는 구조를 더 권장합니다.

이 방식이 바로 여러분께서 설계하시려던
**“Profile에 user_id를 둔다”**는 구조입니다.
가장 실무적인 설계이자 미래 변경에도 유연한 방식이죠.

